<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:viewModels="clr-namespace:FinanzasApp.ViewModels"
             x:Class="FinanzasApp.Views.ExpenseDetailPage"
             x:DataType="viewModels:ExpenseDetailViewModel"
             Shell.NavBarIsVisible="False">

    <Grid IgnoreSafeArea="True">
        <Grid InputTransparent="True">
            <Ellipse x:Name="TopGlow"
                     WidthRequest="300"
                     HeightRequest="300"
                     HorizontalOptions="Start"
                     VerticalOptions="Start"
                     Margin="-80,-60,0,0"
                     Opacity="0.45">
                <Ellipse.Fill>
                    <RadialGradientBrush Center="0.2,0.2" Radius="0.9">
                        <GradientStop Color="#57AEFF" Offset="0.0" />
                        <GradientStop Color="#00000000" Offset="1.0" />
                    </RadialGradientBrush>
                </Ellipse.Fill>
            </Ellipse>

            <Ellipse x:Name="BottomGlow"
                     WidthRequest="360"
                     HeightRequest="360"
                     HorizontalOptions="End"
                     VerticalOptions="End"
                     Margin="0,0,-60,-140"
                     Opacity="0.55">
                <Ellipse.Fill>
                    <RadialGradientBrush Center="0.8,0.8" Radius="1.0">
                        <GradientStop Color="#8B5CF6" Offset="0.0" />
                        <GradientStop Color="#00000000" Offset="1.0" />
                    </RadialGradientBrush>
                </Ellipse.Fill>
            </Ellipse>
        </Grid>

        <ScrollView VerticalScrollBarVisibility="Never">
            <VerticalStackLayout x:Name="DetailContainer" Padding="20,48" Spacing="18">
                <Grid ColumnDefinitions="Auto,*" VerticalOptions="Start">
                    <Button Text="â†" WidthRequest="44" HeightRequest="44" CornerRadius="22" Clicked="OnBackTapped" Style="{StaticResource SecondaryButtonStyle}" />
                    <Label Grid.Column="1" Text="Movimiento" FontSize="24" FontAttributes="Bold" VerticalOptions="Center" HorizontalOptions="Start" />
                </Grid>

                <Border Style="{StaticResource CardBorderStyle}" Padding="20,22" StrokeThickness="0.6" Stroke="#1F2A44">
                    <VerticalStackLayout Spacing="14">
                        <Label Text="Registrar ingreso o gasto" FontAttributes="Bold" />

                        <Border Style="{StaticResource InputBorderStyle}">
                            <Grid ColumnDefinitions="40,*" HeightRequest="52" VerticalOptions="Center">
                                <Label Text="âœï¸" VerticalOptions="Center" HorizontalOptions="Center" />
                                <Entry Grid.Column="1" Placeholder="DescripciÃ³n" Text="{Binding Description}" Style="{StaticResource InputEntryStyle}" Focused="OnInputFocused" Unfocused="OnInputUnfocused" />
                            </Grid>
                        </Border>

                        <Border Style="{StaticResource InputBorderStyle}">
                            <Grid ColumnDefinitions="40,*" HeightRequest="52" VerticalOptions="Center">
                                <Label Text="ðŸ’°" VerticalOptions="Center" HorizontalOptions="Center" />
                                <Entry Grid.Column="1" Placeholder="Monto" Keyboard="Numeric" Text="{Binding Amount}" Style="{StaticResource InputEntryStyle}" Focused="OnInputFocused" Unfocused="OnInputUnfocused" />
                            </Grid>
                        </Border>

                        <Border Style="{StaticResource InputBorderStyle}">
                            <Grid ColumnDefinitions="40,*" HeightRequest="52" VerticalOptions="Center">
                                <Label Text="ðŸ“…" VerticalOptions="Center" HorizontalOptions="Center" />
                                <DatePicker Grid.Column="1" Date="{Binding Date}" TextColor="{StaticResource TextPrimary}" BackgroundColor="Transparent" />
                            </Grid>
                        </Border>

                        <Border Style="{StaticResource InputBorderStyle}">
                            <Grid ColumnDefinitions="40,*" HeightRequest="52" VerticalOptions="Center">
                                <Label Text="ðŸ“Œ" VerticalOptions="Center" HorizontalOptions="Center" />
                                <HorizontalStackLayout Grid.Column="1" Spacing="10" VerticalOptions="Center">
                                    <Label Text="Â¿Es ingreso?" TextColor="{StaticResource TextGray}" VerticalTextAlignment="Center" />
                                    <Switch IsToggled="{Binding IsIncome}" OnColor="{StaticResource PrimaryBlue}" ThumbColor="White" />
                                </HorizontalStackLayout>
                            </Grid>
                        </Border>

                        <Button Text="Guardar" Style="{StaticResource PrimaryButtonStyle}" Command="{Binding SaveCommand}" />
                        <Button Text="Cancelar" Style="{StaticResource SecondaryButtonStyle}" Clicked="OnBackTapped" />
                    </VerticalStackLayout>
                </Border>
            </VerticalStackLayout>
        </ScrollView>
    </Grid>
</ContentPage>
