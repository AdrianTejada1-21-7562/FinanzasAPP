<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:services="clr-namespace:FinanzasApp.Services"
             x:Class="FinanzasApp.Views.ApiPage"
             Shell.NavBarIsVisible="False">

    <Grid IgnoreSafeArea="True">
        <Grid InputTransparent="True">
            <Ellipse x:Name="TopGlow"
                     WidthRequest="300"
                     HeightRequest="300"
                     HorizontalOptions="Start"
                     VerticalOptions="Start"
                     Margin="-60,-40,0,0"
                     Opacity="0.45">
                <Ellipse.Fill>
                    <RadialGradientBrush Center="0.3,0.2" Radius="0.9">
                        <GradientStop Color="#57AEFF" Offset="0.0" />
                        <GradientStop Color="#00000000" Offset="1.0" />
                    </RadialGradientBrush>
                </Ellipse.Fill>
            </Ellipse>

            <Ellipse x:Name="BottomGlow"
                     WidthRequest="340"
                     HeightRequest="340"
                     HorizontalOptions="End"
                     VerticalOptions="End"
                     Margin="0,0,-80,-100"
                     Opacity="0.55">
                <Ellipse.Fill>
                    <RadialGradientBrush Center="0.7,0.8" Radius="1.0">
                        <GradientStop Color="#8B5CF6" Offset="0.0" />
                        <GradientStop Color="#00000000" Offset="1.0" />
                    </RadialGradientBrush>
                </Ellipse.Fill>
            </Ellipse>
        </Grid>

        <ScrollView VerticalScrollBarVisibility="Never">
            <VerticalStackLayout x:Name="ApiContainer" Padding="22,48" Spacing="18">
                <Grid ColumnDefinitions="*,Auto" VerticalOptions="Start">
                    <VerticalStackLayout Spacing="2">
                        <Label Text="FinanzasApp" FontSize="22" FontAttributes="Bold" />
                        <Label Text="API REST" TextColor="{StaticResource TextGray}" />
                    </VerticalStackLayout>
                    <Border BackgroundColor="#1B2236" StrokeThickness="0" Padding="12,6" StrokeShape="RoundRectangle 14" VerticalOptions="Center">
                        <Label Text="JSONPlaceholder" TextColor="{StaticResource TextGray}" />
                    </Border>
                </Grid>

                <Border Style="{StaticResource CardBorderStyle}" Padding="18,20" StrokeThickness="0.6" Stroke="#1F2A44">
                    <VerticalStackLayout Spacing="12">
                        <Label Text="Editar payload" FontAttributes="Bold" />
                        <Border Style="{StaticResource InputBorderStyle}">
                            <Grid ColumnDefinitions="40,*" HeightRequest="52" VerticalOptions="Center">
                                <Label Text="ðŸ“" VerticalOptions="Center" HorizontalOptions="Center" />
                                <Entry Grid.Column="1" Placeholder="TÃ­tulo" Style="{StaticResource InputEntryStyle}" Focused="OnInputFocused" Unfocused="OnInputUnfocused" />
                            </Grid>
                        </Border>
                        <Border Style="{StaticResource InputBorderStyle}" HeightRequest="120">
                            <Grid RowDefinitions="Auto,*" Padding="0" VerticalOptions="Fill">
                                <Label Text="Resumen" TextColor="{StaticResource TextGray}" Padding="12,8,12,4" />
                                <Editor Grid.Row="1" Placeholder="Ingresa un cuerpo" Style="{StaticResource InputEntryStyle}" Focused="OnInputFocused" Unfocused="OnInputUnfocused" />
                            </Grid>
                        </Border>
                        <Label Text="Los comandos usan los datos de prueba definidos en el ViewModel." TextColor="{StaticResource TextGray}" FontSize="12" />
                    </VerticalStackLayout>
                </Border>

                <Grid ColumnDefinitions="*,*,*,*" ColumnSpacing="10">
                    <Button Text="GET" Style="{StaticResource PrimaryButtonStyle}" BackgroundColor="#22D3EE" Command="{Binding LoadCommand}" />
                    <Button Text="POST" Style="{StaticResource PrimaryButtonStyle}" BackgroundColor="#10B981" Command="{Binding CreateCommand}" />
                    <Button Text="PUT" Style="{StaticResource PrimaryButtonStyle}" BackgroundColor="#F59E0B" Command="{Binding UpdateCommand}" />
                    <Button Text="DELETE" Style="{StaticResource PrimaryButtonStyle}" BackgroundColor="#EF4444" Command="{Binding DeleteCommand}" />
                </Grid>

                <Border Style="{StaticResource CardBorderStyle}" Padding="14" StrokeThickness="0.6" Stroke="#1F2A44">
                    <VerticalStackLayout Spacing="10">
                        <Label Text="Resultados" FontAttributes="Bold" />
                        <CollectionView ItemsSource="{Binding Posts}" SelectionMode="None">
                            <CollectionView.ItemTemplate>
                                <DataTemplate x:DataType="services:ApiPost">
                                    <Border StrokeShape="RoundRectangle 18" BackgroundColor="#0F1525" StrokeThickness="0" Padding="12" Margin="0,0,0,10">
                                        <VerticalStackLayout Spacing="6">
                                            <Label Text="{Binding title}" FontAttributes="Bold" />
                                            <Label Text="{Binding body}" TextColor="{StaticResource TextGray}" />
                                        </VerticalStackLayout>
                                    </Border>
                                </DataTemplate>
                            </CollectionView.ItemTemplate>
                        </CollectionView>
                    </VerticalStackLayout>
                </Border>
            </VerticalStackLayout>
        </ScrollView>
    </Grid>
</ContentPage>
